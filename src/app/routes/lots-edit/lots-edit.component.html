<div class="content-heading">
  <div>Agregar un nuevo lote
    <!-- <small>Native Angular input validation</small> -->
  </div>
</div>

<div class="container-fluid mt-5">
  <div class="row d-flex justify-content-center align-content-center ">
    <div class="col-12 col-sm-10 col-md-9 col-lg-9 col-xl-8">
      <form [formGroup]="adminagronodo" (submit)="register(adminagronodo.value)">
        <div class="card ">
          <div class="card-body">
            <div class="row">
              <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6">
                <div class="form-group row">
                  <div class="col ">
                    <label>Nombre de usuario</label>
                    <input *ngIf="!id" class="form-control" formControlName="username" type="text" />
                    <input *ngIf="id" class="form-control" formControlName="username" type="text" disabled />

                    <span class="text-danger" *ngIf="adminagronodo.controls['username'].errors?.required">Ingresa un
                      campo
                      válido</span>
                    <span class="text-danger" *ngIf="adminagronodo.controls['username'].errors?.cannotContainSpace">
                      No se permiten espacios en este campo</span>
                  </div>
                </div>

              </div>
              <div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-6 text-center">
                <agm-map [latitude]="lat" [longitude]="lng" [zoom]="zoom">
                  <agm-polygon [paths]="paths" (polyClick)="men()"></agm-polygon>
                  <!-- <agm-map [latitude]="lat" [longitude]="lng" [zoom]="zoom">  -->
                </agm-map>

              </div>
            </div>
          </div>
          <div *ngIf="adminagronodo.valid" class="card-footer card-default text-center">
            <button class="btn btn-info" type="submit"><em class="fa-2x mr-2 fas fa-plus font-13"></em>Guardar</button>
          </div>
          <div class="row text-right p-2">
            <div class="col ">
            <button class="btn btn-success" (click)="Modal.show()">Agregar un sub lote</button>
    
            </div>
          </div>
          <div class="row d-flex justify-content-center align-content-center ">
            <div class="col">
              <div class="card-body">
                <!-- START table-responsive-->
                <div class="table-responsive">
                  <table class="table">
                    <thead>
                      <tr>
                        <th>#</th>
                        <th>Nombre</th>
                        <th>Tipo de cultivo</th>
                        <th>Tipo de lote</th>
                      </tr>
                    </thead>
                    <tbody *ngFor="let items of sublotearray let c = index;">
                      <tr>
                        <td>{{c + 1}}</td>
                        <td>{{items.name}}</td>
                        <td>{{items.typeC}}</td>
                        <td>{{items.typeL}}</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <!-- END table-responsive-->
              </div>
  
            </div>
          </div>

        </div>
      </form>
      

    </div>
  </div>
</div>
<!-- END row-->
<div bsModal #Modal="bs-modal" class="modal fade " tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"
  aria-hidden="true">
  <div class="modal-dialog modal-lg " style="height: 52%;width: 100%;">
    <div class="modal-content">
      <div class="modal-header p-0">
        <div class="brand-logo" style="font-size: 20px;padding: 8px;">
          <img class="img-fluid" src="assets/img/logo.png" alt="App Logo" style="height: 54px;" />
          Agregar un sublote
        </div>
        <button type="button" class="close" aria-label="Close" (click)="Modal.hide()"
          style="font-size: 34px;padding: 23px;">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
          
          <div class="container">
              <div class="row">
                  <div class="col">
                      <form [formGroup]="sublotesforms" (submit)="sublote(sublotesforms.value)" >
                      <div class="form-group ">
                          <div class="col-12">
                  <label>Nombre</label>
                  <input class="form-control" formControlName="name" type="text" />
                  <span class="text-danger" *ngIf="sublotesforms.controls['name'].errors?.required">Ingresa un campo
                    válido</span>
                </div>
              </div>
              <div class="form-group ">
                <div class="col-12">
                  <label>Tipo de cultivo</label>
                  <input class="form-control" formControlName="TypeC" type="text" />
                  <span class="text-danger" *ngIf="sublotesforms.controls['TypeC'].errors?.required">Ingresa un campo
                    válido</span>
                </div>
              </div>
              <div class="form-group ">
                <div class="col-12">

                  <div data-intro="Selecciona tu ocupación." class="form-group">
                    <label>Tipo de lote</label><br>
                    <select formControlName="TypeL" class="form-control">
                      <option value="" disabled>
                        Seleccione una ocupación...
                      </option>
                      <option value="Estudio" class="form-control">Protegida</option>
                      <option value="Egresado">Tradicional</option>
                    </select>
                  </div>
                  <span class="text-danger" *ngIf="sublotesforms.controls['TypeL'].errors?.required">Ingresa un campo
                    válido</span>
                </div>
            </div>
            <div class="text-center mt-3">
                <button class="btn btn-success " type="submit" (click)="Modal.hide()">Agregar</button>

            </div>

        </form> 
            </div>
            <div class="col">
                <agm-map [latitude]="lat" [longitude]="lng" [zoom]="zoom" style="width: 474px;
                height: 433px;">
                    <agm-polygon [paths]="paths" ></agm-polygon>
                    <!-- <agm-map [latitude]="lat" [longitude]="lng" [zoom]="zoom">  -->
                  </agm-map>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
